
# My Building Block (Schema)

`ogc.bbr.template.my-building-block` *v0.1*

University of Guelph Meat lab data - data collected based on standard slaughterhouse procedures. Metadata gathered through OCA - schema available on Borealis.  Next step - creating the building block for a profile. 

[*Status*](http://www.opengis.net/def/status): Under development

## Description

## University of Guelph Beef Meat Lab data

Data is collected at the meat lab on campus of all beef animals grown and trialed at the Ontario Beef Research Centre (Ontario Agri-food Alliance Partnership)  Standard data collected includes hot carcass wts, ribfat measures, and standard grading data.

## OCA Schema for the UG meat lab data

OCA schemas were created for UG meat lab data - schema is available at https://borealisdata.ca/dataverse/adcSchema for viewing

## Taking it to the next level

Working with OCA schemas to move to DCAT and beyond to facilitate catalogue searching through the creation of a profile 

## Examples

### Test case for CDIF workshop
Generated by Tarql by @Pwin
#### ttl
```ttl
@prefix a:  <https://uoguelph.ca/examples/id/dataset/record/> .
@prefix b:  <https://uoguelph.ca/examples/id/dataset/column/> .
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

a:_InstanceVariable-source_19970401_46F
        b:_AttributeValue_animal_id     "46F" ;
        b:_AttributeValue_hotcarcass_wt  "244" ;
        b:_AttributeValue_rib_fat1      "9" ;
        b:_AttributeValue_rib_fat2      "12" ;
        b:_AttributeValue_rib_fat3      "10" ;
        b:_AttributeValue_grade_fat     "8" ;
        b:_AttributeValue_ribeyearea_sqin  "9.2" ;
        b:_AttributeValue_ribeyearea_sqmm  "." ;
        b:_AttributeValue_marbling      "4.5" ;
        b:_AttributeValue_lean_color    "4" ;
        b:_AttributeValue_fat_color     "4" ;
        b:_AttributeValue_qualitygrade_BGA  "." ;
        b:_AttributeValue_qualitygrade_UG  "AA" ;
        b:_AttributeValue_yieldgrade_BGA  "." ;
        b:_AttributeValue_yieldgrade_UG  "A1" ;
        b:_AttributeValue_fatclass_BGA  "." ;
        b:_AttributeValue_fatclass_UG   "2" ;
        b:_AttributeValue_ribeyewidth_BGA  "." ;
        b:_AttributeValue_ribeyewidth_UG  "1" ;
        b:_AttributeValue_ribeyelength_BGA  "." ;
        b:_AttributeValue_ribeyelength_UG  "1" ;
        b:_AttributeValue_muscleclass_BGA  "." ;
        b:_AttributeValue_muscleclass_UG  "1" ;
        b:_AttributeValue_leanyield_BGA  "." ;
        b:_AttributeValue_leanyield_UG  "59" ;
        b:_AttributeValue_live_wt       "." ;
        b:_AttributeValue_rib_wt        "3.36" ;
        b:_AttributeValue_body_fat      "0.1" ;
        b:_AttributeValue_sub_fat       "0.46" ;
        b:_AttributeValue_inter_fat     "0.54" ;
        b:_AttributeValue_lean_wt       "1.68" ;
        b:_AttributeValue_bone_wt       "0.58" ;
        b:_AttributeValue_liver_wt      "." ;
        b:_AttributeValue_discrepancies  "." ;
        b:_AttributeValue_decl_steer    "." ;
        b:_AttributeValue_decl_heifer   "." ;
        b:_AttributeValue_decl_bull     "." ;
        b:_AttributeValue_decl_cow      "." ;
        b:_AttributeValue_image_id      "." .

a:_InstanceVariable-source_19970421_82F
        b:_AttributeValue_animal_id     "82F" ;
        b:_AttributeValue_hotcarcass_wt  "323" ;
        b:_AttributeValue_rib_fat1      "17" ;
        b:_AttributeValue_rib_fat2      "7" ;
        b:_AttributeValue_rib_fat3      "9" ;
        b:_AttributeValue_grade_fat     "9" ;
        b:_AttributeValue_ribeyearea_sqin  "12.1" ;
        b:_AttributeValue_ribeyearea_sqmm  "." ;
        b:_AttributeValue_marbling      "5" ;
        b:_AttributeValue_lean_color    "4" ;
        b:_AttributeValue_fat_color     "4" ;
        b:_AttributeValue_qualitygrade_BGA  "." ;
        b:_AttributeValue_qualitygrade_UG  "AA" ;
        b:_AttributeValue_yieldgrade_BGA  "." ;
        b:_AttributeValue_yieldgrade_UG  "A1" ;
        b:_AttributeValue_fatclass_BGA  "." ;
        b:_AttributeValue_fatclass_UG   "3" ;
        b:_AttributeValue_ribeyewidth_BGA  "." ;
        b:_AttributeValue_ribeyewidth_UG  "3" ;
        b:_AttributeValue_ribeyelength_BGA  "." ;
        b:_AttributeValue_ribeyelength_UG  "2" ;
        b:_AttributeValue_muscleclass_BGA  "." ;
        b:_AttributeValue_muscleclass_UG  "3" ;
        b:_AttributeValue_leanyield_BGA  "." ;
        b:_AttributeValue_leanyield_UG  "60" ;
        b:_AttributeValue_live_wt       "." ;
        b:_AttributeValue_rib_wt        "5.06" ;
        b:_AttributeValue_body_fat      "0.1" ;
        b:_AttributeValue_sub_fat       "0.66" ;
        b:_AttributeValue_inter_fat     "0.74" ;
        b:_AttributeValue_lean_wt       "2.64" ;
        b:_AttributeValue_bone_wt       "0.92" ;
        b:_AttributeValue_liver_wt      "." ;
        b:_AttributeValue_discrepancies  "." ;
        b:_AttributeValue_decl_steer    "." ;
        b:_AttributeValue_decl_heifer   "." ;
        b:_AttributeValue_decl_bull     "." ;
        b:_AttributeValue_decl_cow      "." ;
        b:_AttributeValue_image_id      "." .

a:_InstanceVariable-source_19970429_35F
        b:_AttributeValue_animal_id     "35F" ;
        b:_AttributeValue_hotcarcass_wt  "310" ;
        b:_AttributeValue_rib_fat1      "17" ;
        b:_AttributeValue_rib_fat2      "14" ;
        b:_AttributeValue_rib_fat3      "10" ;
        b:_AttributeValue_grade_fat     "10" ;
        b:_AttributeValue_ribeyearea_sqin  "10.5" ;
        b:_AttributeValue_ribeyearea_sqmm  "." ;
        b:_AttributeValue_marbling      "6" ;
        b:_AttributeValue_lean_color    "4" ;
        b:_AttributeValue_fat_color     "4" ;
        b:_AttributeValue_qualitygrade_BGA  "." ;
        b:_AttributeValue_qualitygrade_UG  "AAA" ;
        b:_AttributeValue_yieldgrade_BGA  "." ;
        b:_AttributeValue_yieldgrade_UG  "A2" ;
        b:_AttributeValue_fatclass_BGA  "." ;
        b:_AttributeValue_fatclass_UG   "3" ;
        b:_AttributeValue_ribeyewidth_BGA  "." ;
        b:_AttributeValue_ribeyewidth_UG  "1" ;
        b:_AttributeValue_ribeyelength_BGA  "." ;
        b:_AttributeValue_ribeyelength_UG  "1" ;
        b:_AttributeValue_muscleclass_BGA  "." ;
        b:_AttributeValue_muscleclass_UG  "1" ;
        b:_AttributeValue_leanyield_BGA  "." ;
        b:_AttributeValue_leanyield_UG  "58" ;
        b:_AttributeValue_live_wt       "." ;
        b:_AttributeValue_rib_wt        "4.28" ;
        b:_AttributeValue_body_fat      "0.14" ;
        b:_AttributeValue_sub_fat       "0.46" ;
        b:_AttributeValue_inter_fat     "0.68" ;
        b:_AttributeValue_lean_wt       "2.3" ;
        b:_AttributeValue_bone_wt       "0.7" ;
        b:_AttributeValue_liver_wt      "." ;
        b:_AttributeValue_discrepancies  "." ;
        b:_AttributeValue_decl_steer    "." ;
        b:_AttributeValue_decl_heifer   "." ;
        b:_AttributeValue_decl_bull     "." ;
        b:_AttributeValue_decl_cow      "." ;
        b:_AttributeValue_image_id      "." .

```

## Schema

```yaml
$schema: https://json-schema.org/draft/2020-12/schema
description: provenance chain
$defs:
  objectref:
    $anchor: objectref
    $ref: https://opengeospatial.github.io/bblocks/annotated-schemas/ogc-utils/iri-or-curie/schema.json
  oneOrMoreActivitiesOrRefIds:
    oneOf:
    - $ref: '#/$defs/objectref'
    - $ref: '#/$defs/Activity'
    - type: array
      items:
        anyOf:
        - $ref: '#/$defs/objectref'
        - $ref: '#/$defs/Activity'
  oneOrMoreEntitiesOrRefIds:
    oneOf:
    - $ref: '#/$defs/objectref'
    - $ref: '#/$defs/Entity'
    - type: array
      items:
        anyOf:
        - $ref: '#/$defs/objectref'
        - $ref: '#/$defs/Entity'
  oneOrMoreAgentsOrRefIds:
    oneOf:
    - $ref: '#/$defs/objectref'
    - $ref: '#/$defs/externalLink'
    - $ref: '#/$defs/Agent'
    - type: array
      items:
        anyOf:
        - $ref: '#/$defs/objectref'
        - $ref: '#/$defs/Agent'
  externalLink:
    $ref: https://opengeospatial.github.io/bblocks/annotated-schemas/ogc-utils/json-link/schema.json
  Entity:
    type: object
    properties:
      id:
        type: string
      featureType:
        $ref: '#/$defs/objectref'
      provenance:
        $ref: '#/$defs/Prov'
      wasGeneratedBy:
        $ref: '#/$defs/oneOrMoreActivitiesOrRefIds'
      wasAttributedTo:
        $ref: '#/$defs/oneOrMoreAgentsOrRefIds'
      wasDerivedFrom:
        $ref: '#/$defs/oneOrMoreEntitiesOrRefIds'
      links:
        type: array
        items:
          $ref: '#/$defs/externalLink'
    required:
    - id
    anyOf:
    - properties:
        type:
          type: string
          const: Entity
      required:
      - type
    - required:
      - featureType
    - required:
      - wasGeneratedBy
    - required:
      - wasAttributedTo
    - required:
      - wasDerivedFrom
    - required:
      - provenance
  dateOrTime:
    oneOf:
    - type: string
      format: date
      pattern: ^\d{4}-\d{2}-\d{2}$
    - type: string
      format: date-time
      pattern: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|[+-]\d{2}:\d{2})?$
  Activity:
    type: object
    properties:
      activity:
        $ref: '#/$defs/objectref'
      endedAtTime:
        $ref: '#/$defs/dateOrTime'
      wasAssociatedWith:
        $ref: '#/$defs/oneOrMoreAgentsOrRefIds'
      wasInformedBy:
        $ref: '#/$defs/oneOrMoreActivitiesOrRefIds'
      used:
        $ref: '#/$defs/oneOrMoreEntitiesOrRefIds'
    anyOf:
    - properties:
        type:
          type: string
          const: Activity
      required:
      - type
    - required:
      - activity
    - required:
      - used
    - required:
      - wasInformedBy
    - required:
      - endedAtTime
    - required:
      - startedAtTime
    - required:
      - wasAssociatedWith
  Agent:
    type: object
    properties:
      agentType:
        $ref: '#/$defs/objectref'
      name:
        type: string
      id:
        type: string
        format: uri
      actedOnBehalfOf:
        $ref: '#/$defs/oneOrMoreAgentsOrRefIds'
    required:
    - name
    anyOf:
    - properties:
        type:
          type: string
          const: Agent
      required:
      - type
    - required:
      - agentType
    - required:
      - actedOnBehalfOf
  Prov:
    description: An list of provenance objects linked together to form a provenance
      chain for the current object. Objects may have nested objects as well, with
      or without referencable ids
    type: array
    items:
      oneOf:
      - $ref: '#/$defs/Entity'
      - $ref: '#/$defs/Activity'
      - $ref: '#/$defs/Agent'
anyOf:
- $ref: '#/$defs/Entity'
- $ref: '#/$defs/Activity'
x-jsonld-extra-terms:
  a:
    x-jsonld-id: https://example.org/my-bb-model/a
    x-jsonld-type: '@id'
  b: https://example.org/my-bb-model/b

```

Links to the schema:

* YAML version: [schema.yaml](https://raw.githubusercontent.com/drmitch/agdata/master/build/annotated/bbr/template/my-building-block/schema.json)
* JSON version: [schema.json](https://raw.githubusercontent.com/drmitch/agdata/master/build/annotated/bbr/template/my-building-block/schema.yaml)


# JSON-LD Context

```jsonld
{
  "@context": {
    "href": "oa:hasTarget",
    "rel": {
      "@id": "http://www.iana.org/assignments/relation",
      "@type": "@id",
      "@context": {
        "@base": "http://www.iana.org/assignments/relation/"
      }
    },
    "type": "dct:type",
    "hreflang": "dct:language",
    "title": "rdfs:label",
    "length": "dct:extent",
    "a": {
      "@id": "https://example.org/my-bb-model/a",
      "@type": "@id"
    },
    "b": "https://example.org/my-bb-model/b",
    "oa": "http://www.w3.org/ns/oa#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "dct": "http://purl.org/dc/terms/",
    "@version": 1.1
  }
}
```

You can find the full JSON-LD context here:
[context.jsonld](https://raw.githubusercontent.com/drmitch/agdata/master/build/annotated/bbr/template/my-building-block/context.jsonld)

## Sources

* [University of Guelph Meat Lab Data Profile ](https://example.com/sources/1)

# For developers

The source code for this Building Block can be found in the following repository:

* URL: [https://github.com/drmitch/agdata](https://github.com/drmitch/agdata)
* Path: `_sources/my-building-block`

